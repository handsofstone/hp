@model HP.Models.MenuViewModel
<script>
    $(document).ready(function () {
        //Dropdownlist Selectedchange event
        $("#SelectedPoolId").change(function () {
            $('#teams').empty();
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetTeams")', // we are calling json method
                dataType: 'json',
                data: { id: $("#SelectedPoolId").val() },
                success: function (teams) {
                    $.each(teams, function (i, team) {
                        $("#teams").append('<li><a href="/Team/Roster/'+team.Value+'">'+ team.Text + '</a></li>');
                    });
                },
            error: function (ex) {
                alert('Failed to retrieve states.' + ex);
            }
        });
        return false;
    })
    });
</script>

<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".main-nav">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse main-nav">
            <ul class="nav navbar-nav">
                <li>@Html.ActionLink("Home", "Index", "Home", null, new { @class = "active" })</li>
                @if (Request.IsAuthenticated)
                {
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">
                            @Html.DisplayNameFor(model => Model.SelectedTeam) <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" id="teams">
                            @foreach (HP.Models.Team t in Model.Teams)
                                {
                                <li>@Html.ActionLink(t.Name,"Roster","Team", new { id = t.Id }, null)</li>
                            }
                        </ul>
                    </li>
                    @*<li>@Html.ActionLink("Team", "Team", "Home")</li>*@
                    <li>@Html.ActionLink("Standings", "Standings", "Pool", new { id = Model.SelectedPoolId }, null)</li>
                }
            </ul>
            @if (Request.IsAuthenticated)
            {

                <ul class="nav navbar-nav navbar-right">
                    @if (Model.ShowPool)
                    {
                        <li class="navbar-form">
                            <div class="form-group">
                                @Html.DisplayNameFor(model => Model.SelectedPoolId)
                            </div>
                            <div class="form-group">
                                @Html.DropDownListFor(model => Model.SelectedPoolId, Model.Pools, new { @class = "form-control" })
                            </div>
                        </li>
                    }
                </ul>
            }
        </div>
    </div>
</div>
